# black-scholes公式推导
模型假设：         
1. The spot price $S_t$ follows lognormal process , driven by constant volatility $\sigma$.     
2. Short selling is permissible.    
3. No transaction costs or taxes.    
4. risk-free rates $r$ , constant across all maturities.         
5. No riskless arbitrage.      
6. Trading is continuous between now $(t=0)$ and expiry $(t=T)$.

伊藤引理：定义伊藤过程 $X_t$ 为满足下列随机微分方程的随机过程   
$$d X_t=\mu_t d t+\sigma_t d W_t$$  

对于伊藤过程 $X_t$ 和二次可导函数 $f(t, x)$ ，以下等式成立:   
$$d f\left(t, X_t\right)=\left(\frac{\partial f}{\partial t}+\mu_t \frac{\partial f}{\partial x}+\frac{1}{2} \sigma_t^2 \frac{\partial^2 f}{\partial x^2}\right) d t+\sigma_t \frac{\partial f}{\partial x} d W_t$$   

标的物的价格： $$d S_t=\mu S_t d t+\sigma S_t d W_t$$      
股价解析式推导：    
$$d(\ln S_t) = \frac{1}{S_t} d S_t - \frac{1}{2 S^2_t} (d S_t)^2$$
$$d(\ln S_t) = \left(\mu-\frac{\sigma^2}{2}\right) d t+\sigma d W_t$$
$$S_t = S_0 \exp \left(\left(\mu-\frac{\sigma^2}{2}\right) T+\sigma W(T)\right)$$
注： $\mu$ :股票的年收益率期望; $\mu-\frac{\sigma^2}{2}$ :股票每年的连续复利期望收益率     

期权定价（欧式看涨期权C为例）:     
$$C=C(S_t,t)$$
由伊藤引理：   
$$d C=\frac{\partial C}{\partial t} d t + \frac{\partial C}{\partial S_t} d S_t + \frac{\partial^2 C}{2 \partial S^2_t} (d S_t)^2$$
$$d C=\left(\frac{\partial C}{\partial S_t} \mu S_t+\frac{\partial C}{\partial t}+\frac{1}{2} \frac{\partial^2 C}{\partial S_t^2} \sigma^2 S_t^2\right) d t+\frac{\partial C}{\partial S_t} \sigma S_t d W_t$$
构建Delta 对冲（做空 1 份期权，并做多 $\partial C / \partial S_t$ 份股票），并且用P表示该投资组合价值
$$d P = - d C + \frac{\partial C}{\partial S_t} d S_t$$
$$d P = \left(-\frac{\partial C}{\partial t}-\frac{1}{2} \frac{\partial^2 C}{\partial S^2_t} \sigma^2 S^2_t\right) d t$$
在不存在无风险套利的市场中，该投资组合在 $d t$ 内的收益率必须等于无风险收益率 $r$ ，即 $d P=r P d t$ 
$$\left(-\frac{\partial C}{\partial t}-\frac{1}{2} \frac{\partial^2 C}{\partial S^2_t} \sigma^2 S^2_t\right) d t = r(-C + \frac{\partial C}{\partial S_t} S_t) d t$$
$$\frac{\partial C}{\partial t} + r S_t\frac{\partial C}{\partial S_t}  + \frac{1}{2} \sigma^2 S^2_t \frac{\partial^2 C}{\partial S^2_t} = rC$$
由此得到Black-Scholes 微分方程      
求解该方程还需一个边界条件——当时间 $t=T$ (行权时刻) 时，期权的价格 $C$ 必须满足 $C=\max (S(T)-K, 0)$ ，K 是行权价格。
